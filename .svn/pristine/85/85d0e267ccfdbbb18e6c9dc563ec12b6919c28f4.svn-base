import {masterCardList,saveOrUpdate} from '@/services/MasterCardList';


export default {
    namespace: 'masterCard',
    state: {
        loading:false,
        list: {
            data:{
             total:0,
             rows: [],
             totalPage: 5
            }
           },
      },

    effects: {
        *fetch({ payload }, { call, put } ,) {
            yield put({
              type: 'loading',
            });
            const response =  yield call(masterCardList,payload);
            yield put({
              type: 'save',
              payload:response
            });
          },

        *update({ payload }, { call, put }) {
            const response = yield call(saveOrUpdate, payload);
            if (response.code === 'SUCCESS') {
              const newFetch = yield call(masterCardList, {
                pageNo: 1,
                pageSize: 10
              });
              yield put({
                type: 'save',
                payload: newFetch,
              });
              notification.success({
                message: response.code,
                description: response.msg,
              });
            } else {
              notification.error({
                message: response.code,
                description: response.msg,
              });
            }
          },


    },
    reducers: {
        loading(state){
          return {
            ...state,
            loading:true
          };
        },
    
        save(state, action) {
          return {
            ...state,
            list: action.payload,
            loading:false
          };
        },

    }
};